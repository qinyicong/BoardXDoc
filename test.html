<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown Renderer</title>
    <style>
        /* 样式设置 */
        body {
            display: flex;
            font-family: Arial, sans-serif;
        }

        nav {
            width: 200px;
            padding: 20px;
            background-color: #f4f4f4;
            border-right: 2px solid #ccc;
        }

        nav a {
            display: block;
            margin-bottom: 10px;
            text-decoration: none;
            color: blue;
            cursor: pointer;
        }

        nav a:hover {
            color: darkblue;
        }

        .content {
            flex-grow: 1;
            padding: 20px;
            background-color: #f9f9f9;
            border-left: 2px solid #ccc;
        }

        .content h1 {
            margin-top: 0;
        }
    </style>
</head>
<body>

    <!-- 左侧导航栏 -->
    <nav>
        <a href="wiki/Home.md" onclick="loadMarkdown('wiki/Home.md')">Agent Page 1</a>
        <a href="wiki/Agent/Copywriter.md" onclick="loadMarkdown('wiki/Agent/Copywriter.md')">Tools Page 1</a>
        <a href="#" onclick="loadMarkdown('Agent/file3.md')">Agent Page 2</a>
        <a href="#" onclick="loadMarkdown('Tools/file4.md')">Tools Page 2</a>
    </nav>

    <!-- 右侧内容区域 -->
    <div id="wikicontent" class="content">
        <h1>Welcome</h1>
        <p>Please select a page from the left navigation to view its content.</p>
    </div>

    <script>
        // 默认加载 Agent 下的 file1.md
        loadMarkdown('wiki/Home.md');

        // 加载指定的 Markdown 文件并渲染
        function loadMarkdown(file) {
            const contentContainer = document.getElementById('wikicontent'); // 获取渲染内容的容器

            // 获取原始的 Markdown 文件内容
            fetch(`https://api.github.com/repos/qinyicong/BoardXDoc/contents/${file}`)
                .then(response => response.json())
                .then(data => {
                    // 获取文件的内容，GitHub 返回的内容是 Base64 编码的，需要解码
                    const markdownContent = atob(data.content);  // 解码 Base64

                    // 调用 GitHub 的 Markdown 渲染端点
                    fetch('https://api.github.com/markdown', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ text: markdownContent, mode: 'gfm' }) // GitHub Flavored Markdown (GFM)
                    })
                    .then(response => response.text())
                    .then(renderedHtml => {
                        contentContainer.innerHTML = renderedHtml;  // 渲染 HTML 内容到页面
                    })
                    .catch(error => {
                        console.error('Error rendering Markdown:', error);
                        contentContainer.innerHTML = '<p>Failed to render Markdown content.</p>';
                    });
                })
                .catch(error => {
                    console.error('Error loading Markdown file:', error);
                    contentContainer.innerHTML = '<p>Failed to load Markdown file.</p>';
                });
        }
    </script>

</body>
</html>
